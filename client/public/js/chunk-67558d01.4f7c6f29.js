(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67558d01"],{1276:function(t,e,s){"use strict";var a=s("d784"),o=s("44e7"),i=s("825a"),r=s("1d80"),n=s("4840"),l=s("8aa5"),c=s("50c4"),u=s("14c3"),d=s("9263"),f=s("d039"),p=[].push,m=Math.min,h=4294967295,g=!f((function(){return!RegExp(h,"y")}));a("split",2,(function(t,e,s){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,s){var a=String(r(this)),i=void 0===s?h:s>>>0;if(0===i)return[];if(void 0===t)return[a];if(!o(t))return e.call(a,t,i);var n,l,c,u=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,g=new RegExp(t.source,f+"g");while(n=d.call(g,a)){if(l=g.lastIndex,l>m&&(u.push(a.slice(m,n.index)),n.length>1&&n.index<a.length&&p.apply(u,n.slice(1)),c=n[0].length,m=l,u.length>=i))break;g.lastIndex===n.index&&g.lastIndex++}return m===a.length?!c&&g.test("")||u.push(""):u.push(a.slice(m)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(t,s){return void 0===t&&0===s?[]:e.call(this,t,s)}:e,[function(e,s){var o=r(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,o,s):a.call(String(o),e,s)},function(t,o){var r=s(a,t,this,o,a!==e);if(r.done)return r.value;var d=i(t),f=String(this),p=n(d,RegExp),v=d.unicode,I=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),x=new p(g?d:"^(?:"+d.source+")",I),C=void 0===o?h:o>>>0;if(0===C)return[];if(0===f.length)return null===u(x,f)?[f]:[];var b=0,y=0,A=[];while(y<f.length){x.lastIndex=g?y:0;var U,E=u(x,g?f:f.slice(y));if(null===E||(U=m(c(x.lastIndex+(g?0:y)),f.length))===b)y=l(f,y,v);else{if(A.push(f.slice(b,y)),A.length===C)return A;for(var S=1;S<=E.length-1;S++)if(A.push(E[S]),A.length===C)return A;y=b=U}}return A.push(f.slice(b)),A}]}),!g)},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var a=s("1d80"),o=s("5899"),i="["+o+"]",r=RegExp("^"+i+i+"*"),n=RegExp(i+i+"*$"),l=function(t){return function(e){var s=String(a(e));return 1&t&&(s=s.replace(r,"")),2&t&&(s=s.replace(n,"")),s}};t.exports={start:l(1),end:l(2),trim:l(3)}},"5a0c":function(t,e,s){"use strict";var a=s("af3d"),o=s.n(a);o.a},"87da":function(t,e,s){},a9e3:function(t,e,s){"use strict";var a=s("83ab"),o=s("da84"),i=s("94ca"),r=s("6eeb"),n=s("5135"),l=s("c6b6"),c=s("7156"),u=s("c04e"),d=s("d039"),f=s("7c73"),p=s("241c").f,m=s("06cf").f,h=s("9bf2").f,g=s("58a8").trim,v="Number",I=o[v],x=I.prototype,C=l(f(x))==v,b=function(t){var e,s,a,o,i,r,n,l,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=g(c),e=c.charCodeAt(0),43===e||45===e){if(s=c.charCodeAt(2),88===s||120===s)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+c}for(i=c.slice(2),r=i.length,n=0;n<r;n++)if(l=i.charCodeAt(n),l<48||l>o)return NaN;return parseInt(i,a)}return+c};if(i(v,!I(" 0o1")||!I("0b1")||I("+0x1"))){for(var y,A=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof A&&(C?d((function(){x.valueOf.call(s)})):l(s)!=v)?c(new I(b(e)),s,A):b(e)},U=a?p(I):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;U.length>E;E++)n(I,y=U[E])&&!n(A,y)&&h(A,y,m(I,y));A.prototype=x,x.constructor=A,r(o,v,A)}},af3d:function(t,e,s){},d74e:function(t,e,s){"use strict";var a=s("87da"),o=s.n(a);o.a},f767:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goodsdesc"},[s("form",[s("div",{staticClass:"fomr-box form-group clearfix"},[s("div",{staticClass:"form-title fl"},[t._v("商品名称")]),s("div",{staticClass:"form-input fl"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.productInfo.name,expression:"productInfo.name"}],staticClass:"form-control",attrs:{type:"text",maxlength:"30",disabled:1==t.id},domProps:{value:t.productInfo.name},on:{input:function(e){e.target.composing||t.$set(t.productInfo,"name",e.target.value)}}})])]),s("div",{staticClass:"fomr-box form-group clearfix"},[s("div",{staticClass:"form-title fl"},[t._v("商品类型")]),s("div",{staticClass:"form-input fl"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.productInfo.type,expression:"productInfo.type"}],staticClass:"form-control",attrs:{disabled:1==t.id},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.productInfo,"type",e.target.multiple?s:s[0])}}},t._l(t.proTypeList,(function(e,a){return s("option",{key:a,domProps:{value:e.typeId}},[t._v(t._s(e.type))])})),0)])]),s("div",{staticClass:"fomr-box form-group clearfix"},[s("div",{staticClass:"form-title fl"},[t._v("商品价格")]),s("div",{staticClass:"form-input fl"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.productInfo.price,expression:"productInfo.price"}],staticClass:"form-control",attrs:{type:"text",disabled:1==t.id},domProps:{value:t.productInfo.price},on:{input:function(e){e.target.composing||t.$set(t.productInfo,"price",e.target.value)}}})])]),s("div",{staticClass:"fomr-box form-group clearfix"},[s("div",{staticClass:"form-title fl"},[t._v("库存")]),s("div",{staticClass:"form-input fl"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.productInfo.count,expression:"productInfo.count"}],staticClass:"form-control",attrs:{type:"text",disabled:1==t.id},domProps:{value:t.productInfo.count},on:{input:function(e){e.target.composing||t.$set(t.productInfo,"count",e.target.value)}}})])]),s("div",{staticClass:"fomr-box form-group clearfix"},[s("div",{staticClass:"form-title fl"},[t._v("商品图片")]),s("div",{staticClass:"form-upload fl"},[s("Upload",{attrs:{size:t.size},on:{"file-upload":t.fileUpload}},[1==t.id||3==t.id?s("div",{staticClass:"img-box look",style:{"pointer-events":3==t.id?"none":""}},[s("img",{staticClass:"auto-img",attrs:{src:t.staticUrl+"/"+this.productInfo.img,alt:""}})]):t._e()])],1)]),s("div",{staticClass:"fomr-box form-group clearfix"},[s("div",{staticClass:"form-title fl"},[t._v("商品详情图")]),s("div",{staticClass:"form-upload fl"},[s("Upload",{attrs:{size:t.size},on:{"file-upload":t.detailFileUpload}},[1==t.id||3==t.id?s("div",{staticClass:"img-box look",style:{"pointer-events":3==t.id?"none":""}},[s("img",{staticClass:"auto-img",attrs:{src:t.staticUrl+"/"+this.productInfo.imgDetail,alt:""}})]):t._e()])],1)]),s("div",{staticClass:"fomr-box form-group clearfix"},[s("div",{staticClass:"form-title fl"},[t._v("商品状态")]),s("div",{staticClass:"form-input form-radio-box fl clearfix"},[s("div",{staticClass:"fl"},[s("div",{staticClass:"custom-control custom-radio mr-sm-2"},[s("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"r1",name:"r",checked:"","data-status":"1",disabled:1==t.id},on:{change:t.selectStatus}}),s("label",{staticClass:"custom-control-label",attrs:{for:"r1"}},[t._v("上架")])])]),s("div",{staticClass:"fl"},[s("div",{staticClass:"custom-control custom-radio mr-sm-2"},[s("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"r2",name:"r","data-status":"0",disabled:1==t.id},on:{change:t.selectStatus}}),s("label",{staticClass:"custom-control-label",attrs:{for:"r2"}},[t._v("下架")])])])])]),s("div",{staticClass:"fomr-box form-group clearfix"},[s("div",{staticClass:"form-title fl"},[t._v("商品描述")]),s("div",{staticClass:"form-input fl"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.productInfo.desc,expression:"productInfo.desc"}],staticClass:"form-control textarea-box",attrs:{maxlength:"200",disabled:1==t.id},domProps:{value:t.productInfo.desc},on:{input:function(e){e.target.composing||t.$set(t.productInfo,"desc",e.target.value)}}})])]),2==t.id||3==t.id?s("div",{staticClass:"fomr-box form-group clearfix"},[s("button",{staticClass:"btn btn-warning btn-box",attrs:{type:"button"},on:{click:t.postProduct}},[t._v("发布商品")])]):t._e()]),s("Toast")],1)},o=[],i=(s("b0c0"),s("ac1f"),s("5319"),s("0eb4")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload"},[a("label",{staticClass:"upload-label"},[a("input",{staticClass:"file",attrs:{type:"file"},on:{change:t.fileData}})]),t._t("default"),""!=t.url?a("div",{staticClass:"img-box"},[a("img",{staticClass:"auto-img",attrs:{src:t.url,alt:""}})]):a("div",{staticClass:"icon-box"},[a("img",{staticClass:"auto-img",attrs:{src:s("fbc1"),alt:""}})])],2)},n=[],l=(s("a9e3"),s("1276"),{name:"UpLoad",props:{size:{type:Number,default:1}},data:function(){return{url:""}},methods:{fileData:function(t){var e=this,s=t.target.files[0],a=s.size/1024/1024;if(a>this.size)window.alert("上传图片不能超过"+this.size+"MB");else{var o=new FileReader;o.onload=function(t){e.url=this.result,e.$emit("file-upload",{base64:this.result,type:s.type.split("/")[1]})},o.readAsDataURL(s)}}}}),c=l,u=(s("d74e"),s("2877")),d=Object(u["a"])(c,r,n,!1,null,"3d4bec5d",null),f=d.exports,p={name:"GoodsDesc",components:{Upload:f,Toast:i["a"]},data:function(){return{size:.5,proTypeList:[],productInfo:{name:"",type:"default",price:"",count:"",img:"",imgType:"",imgDetail:"",imgDetailType:"",status:"1",desc:""}}},methods:{fileUpload:function(t){console.log("e ==> ",t),this.productInfo.img=t.base64.replace(/data:image\/[A-Za-z]+;base64,/,""),this.productInfo.imgType=t.type},detailFileUpload:function(t){this.productInfo.imgDetail=t.base64.replace(/data:image\/[A-Za-z]+;base64,/,""),this.productInfo.imgDetailType=t.type},getProType:function(){var t=this;this.axios({method:"GET",url:"/proType"}).then((function(e){console.log("result ==> ",e),1052==e.data.code&&(e.data.result.unshift({typeId:"default",type:"请选择"}),t.proTypeList=e.data.result)})).catch((function(t){console.log("err ==> ",t)}))},selectStatus:function(t){this.productInfo.status=t.target.dataset.status},getProductByPid:function(t){var e=this;console.log("pid ==> ",t),this.axios({method:"GET",url:"/productByPid",params:{pid:t}}).then((function(t){console.log(t.data.result[0]),e.productInfo=t.data.result[0]})).catch((function(t){console.log(t)}))},postProduct:function(){var t=this,e=/<\/?script>/,s=/^(([1-9]\d*)|0)(\.\d{1,2})?$/,a=/^[1-9]\d*$/;""==this.productInfo.name||e.test(this.productInfo.name)?this.$showToast({message:"商品名称不能为空且不能含有<script>字符",duration:3e3}):"default"==this.productInfo.type?this.$showToast({message:"请选择商品类型",duration:3e3}):s.test(this.productInfo.price)?a.test(this.productInfo.count)?""==this.productInfo.img?this.$showToast({message:"请上传商品图片",duration:3e3}):""==this.productInfo.imgDetail?this.$showToast({message:"请上传商品详情图片",duration:3e3}):""==this.productInfo.desc||e.test(this.productInfo.desc)?this.$showToast({message:"商品描述不能为空且不能含有<script>字符",duration:3e3}):(console.log("this.productInfo ==> ",this.productInfo),this.axios({method:"POST",url:"/postProduct",data:this.productInfo}).then((function(e){(1070==e.data.code||1071==e.data.code)&&t.$showToast({message:e.data.msg,duration:3e3})})).catch((function(t){console.log("err ==> ",t)}))):this.$showToast({message:"库存只能填写数字且为整数",duration:3e3}):this.$showToast({message:"价格只能填写数字且最多含两位小数",duration:3e3})}},created:function(){var t=this.$route.params.id;this.id=t;var e=this.$route.params.pid;console.log("id ==> ",t,"pid ==> ",e),this.getProType(),1!=t&&3!=t||this.getProductByPid(e)}},m=p,h=(s("5a0c"),Object(u["a"])(m,a,o,!1,null,"1a3b520a",null));e["default"]=h.exports},fbc1:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAC0klEQVR4Xu2cQYoUQRBFs6k7eICiE0UXLvQCcwg95Mwh9ADORlCUhL6E62akoAeaxhoihojfUePrdXT+qPcqyE1m7Rq/UgR2pbqhmYaQYi8BQhBSjECxdpgQhBQjUKwdJgQhxQgUa4cJQUgxAsXaYUIQUoxAsXaYEIQUI1CsHSYEIcUIFGuHCUFIPIHD4fB6WXWe59/xq2tX3PyEjDG+tdY+nLDd994/ahHGpm1ayBjjtrX26QLJXe/9cywm3WpbF/Kwgupd7/2nDmNc0ksVctN7/xqHSbcSQnSsTUkIMWHSFSFEx9qUhBATJl0RQnSsTUkIMWHSFSFEx9qUhBATJl0RQnSsTUkIMWHSFSFEx9qUhBATJl0RQnSsTUkIMWHSFSFEx9qUhBATJl0RQnSsTUkIMWHSFSFEx9qUhBATJl0RQnSsTUkIMWHSFSFEx9qUhBATJl1RuJCLs7a6J7lOUvhZ4lAhK2dtr4NKlxp6ljhMyBjjbWvth45DqaSws8RhQpY7Gsfj8VcpTKJmpml6E3U3JUzI8uz/2f7xqDt0HwkVcpLyrzsbondVHhO6fyzdhws5SVn2k1cCPF9WMm6ys3e73Z/9fn8fnZMiJLrJtfXGGGsXdrgfopJwnoOQa1B/IhMhCEknwB6SjtgXgBAfr/RqhKQj9gUgxMcrvRoh6Yh9AQjx8UqvRkg6Yl8AQny80qsRko7YF4AQH6/0aoSkI/YFIMTHK70aIemIfQEI8fFKr0ZIOmJfAEJ8vNKrEZKO2BeAEB+v9GqEpCP2BSDExyu9+kUKmabp/TzP39PpJQRsXcj5d98f8YSetU1g/uSSmxayPNnFnZTws7YIeQaB092UttXvvZ8/8uYn5Bn+Sv8FIcX0IAQhxQgUa4cJQUgxAsXaYUIQUoxAsXaYEIQUI1CsHSYEIcUIFGuHCUFIMQLF2mFCEFKMQLF2mBCEFCNQrJ2/OhRCdO2C4AEAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=chunk-67558d01.4f7c6f29.js.map