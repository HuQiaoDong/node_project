(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e434da36"],{"159b":function(t,e,a){var n=a("da84"),s=a("fdbc"),o=a("17c2"),r=a("9112");for(var i in s){var c=n[i],l=c&&c.prototype;if(l&&l.forEach!==o)try{r(l,"forEach",o)}catch(u){l.forEach=o}}},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,s=a("a640"),o=a("ae40"),r=s("forEach"),i=o("forEach");t.exports=r&&i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"25f0":function(t,e,a){"use strict";var n=a("6eeb"),s=a("825a"),o=a("d039"),r=a("ad6d"),i="toString",c=RegExp.prototype,l=c[i],u=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=i;(u||f)&&n(RegExp.prototype,i,(function(){var t=s(this),e=String(t.source),a=t.flags,n=String(void 0===a&&t instanceof RegExp&&!("flags"in c)?r.call(t):a);return"/"+e+"/"+n}),{unsafe:!0})},4160:function(t,e,a){"use strict";var n=a("23e7"),s=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},"4d63":function(t,e,a){var n=a("83ab"),s=a("da84"),o=a("94ca"),r=a("7156"),i=a("9bf2").f,c=a("241c").f,l=a("44e7"),u=a("ad6d"),f=a("9f7f"),d=a("6eeb"),g=a("d039"),p=a("69f3").set,h=a("2626"),v=a("b622"),m=v("match"),b=s.RegExp,_=b.prototype,y=/a/g,P=/a/g,C=new b(y)!==y,x=f.UNSUPPORTED_Y,w=n&&o("RegExp",!C||x||g((function(){return P[m]=!1,b(y)!=y||b(P)==P||"/a/i"!=b(y,"i")})));if(w){var E=function(t,e){var a,n=this instanceof E,s=l(t),o=void 0===e;if(!n&&s&&t.constructor===E&&o)return t;C?s&&!o&&(t=t.source):t instanceof E&&(o&&(e=u.call(t)),t=t.source),x&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,"")));var i=r(C?new b(t,e):b(t,e),n?this:_,E);return x&&a&&p(i,{sticky:a}),i},k=function(t){t in E||i(E,t,{configurable:!0,get:function(){return b[t]},set:function(e){b[t]=e}})},S=c(b),I=0;while(S.length>I)k(S[I++]);_.constructor=E,E.prototype=_,d(s,"RegExp",E)}h("RegExp")},"567f":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("fb6a"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("5319");var n=a("d4ec"),s=a("bee2"),o=function(){function t(){Object(n["a"])(this,t)}return Object(s["a"])(t,[{key:"formatDate",value:function(t,e){var a=t.getFullYear().toString();if(/(y+)/.test(e)){var n=RegExp.$1;e=e.replace(n,a.slice(a.length-n.length))}var s={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};for(var o in s){var r=new RegExp("(".concat(o,"{1,2})"));if(r.test(e)){var i=RegExp.$1,c=s[o]>=10||1==i.length?s[o]:"0"+s[o];e=e.replace(i,c)}}return e}}]),t}(),r=new o},8629:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods"},[a("div",{staticClass:"header clearfix"},[a("ul",{staticClass:"list fl clearfix"},[a("li",{staticClass:"fl list-title"},[t._v("商品名称")]),a("li",{staticClass:"fl list-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInfo.name,expression:"searchInfo.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.searchInfo.name},on:{input:function(e){e.target.composing||t.$set(t.searchInfo,"name",e.target.value)}}})])]),a("ul",{staticClass:"list fl clearfix"},[a("li",{staticClass:"fl list-title"},[t._v("商品类型")]),a("li",{staticClass:"fl list-input"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.searchInfo.type,expression:"searchInfo.type"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.searchInfo,"type",e.target.multiple?a:a[0])}}},t._l(t.proTypeList,(function(e,n){return a("option",{key:n,domProps:{value:e.typeId}},[t._v(t._s(e.type))])})),0)])]),a("ul",{staticClass:"list fl clearfix"},[a("li",{staticClass:"fl list-title"},[t._v("商品状态")]),a("li",{staticClass:"fl list-input"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.searchInfo.status,expression:"searchInfo.status"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.searchInfo,"status",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"default"}},[t._v("请选择")]),a("option",{attrs:{value:"1"}},[t._v("正常")]),a("option",{attrs:{value:"0"}},[t._v("禁用")])])])]),a("ul",{staticClass:"list fl clearfix time"},[a("li",{staticClass:"fl list-title"},[t._v("添加日期")]),a("li",{staticClass:"fl list-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInfo.date,expression:"searchInfo.date"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.searchInfo.date},on:{input:function(e){e.target.composing||t.$set(t.searchInfo,"date",e.target.value)}}})])]),a("ul",{staticClass:"list fl clearfix"},[a("li",[a("button",{staticClass:"btn btn-primary",on:{click:t.search}},[t._v("搜索")])])])]),a("div",{staticClass:"btn-box"},[a("button",{staticClass:"btn btn-warning",on:{click:function(e){return t.goGoodsCtPage(2)}}},[t._v("添加商品")])]),a("div",{staticClass:"content"},[a("table",{staticClass:"table table-striped table-hover"},[t._m(0),a("tbody",t._l(t.productList,(function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(n+1))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.type))]),a("td",[t._v(t._s(1==e.status?"上架":"下架"))]),a("td",[t._v(t._s(e.created_at))]),a("td",[t._v(t._s(e.updated_at))]),a("td",[a("button",{staticClass:"btn btn-success btn-sm pro-btn",on:{click:function(a){return t.goGoodsCtPage(1,e.pid)}}},[t._v("查看")]),a("button",{staticClass:"btn btn-info btn-sm pro-btn",on:{click:function(a){return t.goGoodsCtPage(3,e.pid)}}},[t._v("编辑")]),0==e.status?a("button",{staticClass:"btn btn-warning btn-sm pro-btn",on:{click:function(a){return t.toggleProductStatus(1,e.pid,n)}}},[t._v("上架")]):a("button",{staticClass:"btn btn-secondary btn-sm pro-btn",on:{click:function(a){return t.toggleProductStatus(0,e.pid,n)}}},[t._v("下架")]),a("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(a){return t.remove(e.pid,n)}}},[t._v("删除")])])])})),0)]),a("nav",[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:1==t.currentPage},on:{click:function(e){return t.togglePage()}}},[a("a",{staticClass:"page-link",attrs:{href:"javascript:void(0);"}},[t._v("上一页")])]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"javascript:void(0);"}},[t._v(t._s(t.currentPage))])]),a("li",{staticClass:"page-item",class:{disabled:t.currentPage==t.totalPage},on:{click:function(e){return t.togglePage(!0)}}},[a("a",{staticClass:"page-link",attrs:{href:"javascript:void(0);"}},[t._v("下一页")])]),a("li",[a("a",{staticClass:"page-link",attrs:{href:"javascript:void(0);"}},[t._v("共 "+t._s(t.totalPage)+" 页")])])])])]),a("Toast")],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("序号")]),a("th",[t._v("商品名称")]),a("th",[t._v("商品类型")]),a("th",[t._v("商品状态")]),a("th",[t._v("添加时间")]),a("th",[t._v("更新时间")])])])}],o=(a("4160"),a("a434"),a("b0c0"),a("159b"),a("567f")),r=a("0eb4"),i={name:"Goods",components:{Toast:r["a"]},data:function(){return{searchInfo:{name:"",type:"default",status:"default",date:""},proTypeList:[],productList:[],currentPage:1,pageCount:10,totalPage:0,isSearch:!1}},created:function(){this.getProType(),this.getProductList(),this.getProductDataRows()},methods:{goGoodsCtPage:function(t,e){var a={id:t};e&&(a.pid=e),console.log(t,e),this.$router.push({name:"GoodsDesc",params:a})},getProType:function(){var t=this;this.axios({method:"GET",url:"/proType"}).then((function(e){1052==e.data.code&&(e.data.result.unshift({typeId:"default",type:"请选择"}),t.proTypeList=e.data.result)})).catch((function(t){console.log("err ==> ",t)}))},getProductList:function(){var t=this,e=this.getSearchCondition();e.offset=(this.currentPage-1)*this.pageCount,e.limit=this.pageCount,console.log("condition ==> ",e),this.axios({method:"GET",url:"/productList",params:e}).then((function(e){console.log("result ==> ",e),1080==e.data.code&&(e.data.result.forEach((function(t){t.created_at=o["a"].formatDate(new Date(t.created_at),"yyyy-MM-dd hh:mm:ss"),t.updated_at=o["a"].formatDate(new Date(t.updated_at),"yyyy-MM-dd hh:mm:ss")})),t.productList=e.data.result)})).catch((function(t){console.log("err ==> ",t)}))},togglePage:function(t){t?this.currentPage<this.totalPage&&(this.currentPage++,console.log(this.currentPage),this.isSearch||this.getProductList()):this.currentPage>1&&(this.currentPage--,this.isSearch||this.getProductList())},search:function(){console.log("search"),this.currentPage=1,this.totalPage=1,this.getProductDataRows(),this.getProductList()},getSearchCondition:function(){var t=this.searchInfo;console.log("searchCondition ==> ",t);var e={};return""!=t.name&&(e.name=t.name),""!=t.date&&(e.date=t.date),"default"!=t.type&&(e.type=t.type),"default"!=t.status&&(e.status=t.status),e},toggleProductStatus:function(t,e,a){var n=this;this.axios({method:"POST",url:"/productStatus",data:{status:t,pid:e}}).then((function(e){console.log("result ==> ",e),1090==e.data.code?(n.productList[a].status=t,n.$showToast({message:e.data.msg})):1091==e.data.code&&n.$showToast({message:e.data.msg})})).catch((function(t){console.log("err ==> ",t)}))},getProductDataRows:function(){var t=this,e=this.getSearchCondition();this.axios({method:"GET",url:"/productRows",params:e}).then((function(e){console.log("result.... ==> ",e),t.totalPage=Math.ceil(e.data.result/t.pageCount)})).catch((function(t){console.log("err ==> ",t)}))},remove:function(t,e){var a=this;this.axios({method:"POST",url:"/removeProduct",data:{pid:t}}).then((function(t){console.log(t),1074==t.data.code&&1==t.data.result&&(a.currentPage<a.totalPage?(a.getProductList(),a.getProductDataRows()):a.productList.length>=2?(console.log("delectIndex ==> ",e),a.productList.splice(e,1),console.log("最后一页有数据",a.productList)):(console.log("最后一页无数据"),a.currentPage>1?(console.log("最后一页无数据,但有前一页"),a.currentPage--,a.getProductList(),a.getProductDataRows()):(console.log("最后一页无数据,且只剩一页"),a.productList.splice(e,1))))})).catch((function(t){console.log(t)}))}}},c=i,l=(a("f1e3"),a("2877")),u=Object(l["a"])(c,n,s,!1,null,"c907ebf4",null);e["default"]=u.exports},a434:function(t,e,a){"use strict";var n=a("23e7"),s=a("23cb"),o=a("a691"),r=a("50c4"),i=a("7b0b"),c=a("65f0"),l=a("8418"),u=a("1dde"),f=a("ae40"),d=u("splice"),g=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,v=9007199254740991,m="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d||!g},{splice:function(t,e){var a,n,u,f,d,g,b=i(this),_=r(b.length),y=s(t,_),P=arguments.length;if(0===P?a=n=0:1===P?(a=0,n=_-y):(a=P-2,n=h(p(o(e),0),_-y)),_+a-n>v)throw TypeError(m);for(u=c(b,n),f=0;f<n;f++)d=y+f,d in b&&l(u,f,b[d]);if(u.length=n,a<n){for(f=y;f<_-n;f++)d=f+n,g=f+a,d in b?b[g]=b[d]:delete b[g];for(f=_;f>_-n+a;f--)delete b[f-1]}else if(a>n)for(f=_-n;f>y;f--)d=f+n-1,g=f+a-1,d in b?b[g]=b[d]:delete b[g];for(f=0;f<a;f++)b[f+y]=arguments[f+2];return b.length=_-n+a,u}})},a640:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&n((function(){a.call(null,e||function(){throw 1},1)}))}},bee2:function(t,e,a){"use strict";function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}a.d(e,"a",(function(){return s}))},d4ec:function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a.d(e,"a",(function(){return n}))},e470:function(t,e,a){},f1e3:function(t,e,a){"use strict";var n=a("e470"),s=a.n(n);s.a}}]);
//# sourceMappingURL=chunk-e434da36.68f6c40c.js.map